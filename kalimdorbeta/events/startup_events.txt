add_namespace = HOA_startup

#Event to give each country race opinions and such
country_event = {
	id = HOA_startup.1

	hidden = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { has_idea = human_primary_race }
			every_country = {
				limit = { has_idea = human_primary_race }
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				set_variable = { race_index = 1 }
			}
			every_country = {
				limit = { NOT = { has_idea = human_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = orc_primary_race }
			every_country = {
				limit = { has_idea = orc_primary_race }
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				set_variable = { race_index = 2 }
			}
			every_country = {
				limit = { NOT = { has_idea = orc_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = pale_orc_primary_race }
			every_country = {
				limit = { has_idea = pale_orc_primary_race }
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				set_variable = { race_index = 4 }
			}
			every_country = {
				limit = { NOT = { has_idea = pale_orc_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = dwarf_primary_race }
			every_country = {
				limit = { has_idea = dwarf_primary_race }
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				set_variable = { race_index = 5 }
			}
			every_country = {
				limit = { NOT = { has_idea = dwarf_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = goblin_primary_race }
			every_country = {
				limit = { has_idea = goblin_primary_race }
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				set_variable = { race_index = 6 }
			}
			every_country = {
				limit = { NOT = { has_idea = goblin_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = high_elf_primary_race }
			every_country = {
				limit = { has_idea = high_elf_primary_race }
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				set_variable = { race_index = 8 }
			}
			every_country = {
				limit = { NOT = { has_idea = high_elf_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = gnome_primary_race }
			every_country = {
				limit = { has_idea = gnome_primary_race }
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				set_variable = { race_index = 9 }
			}
			every_country = {
				limit = { NOT = { has_idea = gnome_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = night_elf_primary_race }
			every_country = {
				limit = { has_idea = night_elf_primary_race  }
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				set_variable = { race_index = 10 }
			}
			every_country = {
				limit = { NOT = { has_idea = night_elf_primary_race  } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = human_primary_race }
			set_country_flag = opinion_set_race_human
		}
		if = {
			limit = { has_idea = orc_primary_race }
			set_country_flag = opinion_set_race_orc
		}
		if = {
			limit = { has_idea = pale_orc_primary_race }
			set_country_flag = opinion_set_race_pale_orc
		}
		if = {
			limit = { has_idea = dwarf_primary_race }
			set_country_flag = opinion_set_race_dwarf
		}
		if = {
			limit = { has_idea = goblin_primary_race }
			set_country_flag = opinion_set_race_goblin
		}
		if = {
			limit = { has_idea = high_elf_primary_race }
			set_country_flag = opinion_set_race_high_elf
		}
		if = {
			limit = { has_idea = gnome_primary_race }
			set_country_flag = opinion_set_race_gnome
		}
		if = {
			limit = { has_idea = night_elf_primary_race }
			set_country_flag = opinion_set_race_gnome
		}
	}
	option = {}
}

#Change Race Opinion modifier if somehow they change race. Fuck if I know how but just incase cover all the bases.
country_event = {
	id = HOA_startup.2

	hidden = yes

	is_triggered_only = yes

	trigger = {
		OR = {
			AND = {
				NOT = { has_idea = human_primary_race }
				has_country_flag = opinion_set_race_human
			}
			AND = {
				NOT = { has_idea = orc_primary_race }
				has_country_flag = opinion_set_race_orc
			}
			AND = {
				NOT = { has_idea = pale_orc_primary_race }
				has_country_flag = opinion_set_race_pale_orc
			}
			AND = {
				NOT = { has_idea = dwarf_primary_race }
				has_country_flag = opinion_set_race_dwarf
			}
			AND = {
				NOT = { has_idea = goblin_primary_race }
				has_country_flag = opinion_set_race_goblin
			}
			AND = {
				NOT = { has_idea = high_elf_primary_race }
				has_country_flag = opinion_set_race_high_elf
			}
			AND = {
				NOT = { has_idea = gnome_primary_race }
				has_country_flag = opinion_set_race_gnome
			}
			AND = {
				NOT = { has_idea = night_elf_primary_race }
				has_country_flag = opinion_set_race_night_elf
			}
			AND = {
				NOT = { has_country_flag = opinion_set_race_human }
				NOT = { has_country_flag = opinion_set_race_orc }
				NOT = { has_country_flag = opinion_set_race_pale_orc }
				NOT = { has_country_flag = opinion_set_race_dwarf }
				NOT = { has_country_flag = opinion_set_race_goblin }
				NOT = { has_country_flag = opinion_set_race_high_elf }
				NOT = { has_country_flag = opinion_set_race_gnome }
				NOT = { has_country_flag = opinion_set_race_night_elf }
			}
		}
	}

	immediate = {
		clr_country_flag = opinion_set_race_human
		clr_country_flag = opinion_set_race_orc
		clr_country_flag = opinion_set_race_pale_orc
		clr_country_flag = opinion_set_race_dwarf
		clr_country_flag = opinion_set_race_goblin
		clr_country_flag = opinion_set_race_high_elf
		clr_country_flag = opinion_set_race_gnome
		clr_country_flag = opinion_set_race_night_elf
		every_country = {
			remove_opinion_modifier = {
				target = ROOT
				modifier = same_race
			}
			ROOT = {
				remove_opinion_modifier = {
					target = PREV
					modifier = same_race
				}
			}
			remove_opinion_modifier = {
				target = ROOT
				modifier = different_race
			}
			ROOT = {
				remove_opinion_modifier = {
					target = PREV
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = human_primary_race }
			every_country = {
				limit = {
					has_idea = human_primary_race
					ROOT = { has_idea = human_primary_race }
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
			}
			every_country = {
				limit = { NOT = { has_idea = human_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = orc_primary_race }
			every_country = {
				limit = {
					has_idea = orc_primary_race
					ROOT = { has_idea = orc_primary_race }
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
			}
			every_country = {
				limit = { NOT = { has_idea = orc_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = pale_orc_primary_race }
			every_country = {
				limit = {
					has_idea = pale_orc_primary_race
					ROOT = { has_idea = pale_orc_primary_race }
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
			}
			every_country = {
				limit = { NOT = { has_idea = pale_orc_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = dwarf_primary_race }
			every_country = {
				limit = {
					has_idea = dwarf_primary_race
					ROOT = { has_idea = dwarf_primary_race }
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
			}
			every_country = {
				limit = { NOT = { has_idea = dwarf_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = goblin_primary_race }
			every_country = {
				limit = {
					has_idea = goblin_primary_race
					ROOT = { has_idea = goblin_primary_race }
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
			}
			every_country = {
				limit = { NOT = { has_idea = goblin_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = high_elf_primary_race }
			every_country = {
				limit = {
					has_idea = high_elf_primary_race
					ROOT = { has_idea = high_elf_primary_race }
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
			}
			every_country = {
				limit = { NOT = { has_idea = high_elf_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = gnome_primary_race }
			every_country = {
				limit = {
					has_idea = gnome_primary_race
					ROOT = { has_idea = gnome_primary_race }
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
			}
			every_country = {
				limit = { NOT = { has_idea = gnome_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = night_elf_primary_race }
			every_country = {
				limit = {
					has_idea = night_elf_primary_race
					ROOT = { has_idea = night_elf_primary_race }
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = same_race
				}
			}
			every_country = {
				limit = { NOT = { has_idea = night_elf_primary_race } }
				add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
				reverse_add_opinion_modifier = {
					target = ROOT
					modifier = different_race
				}
			}
		}
		if = {
			limit = { has_idea = human_primary_race }
			set_country_flag = opinion_set_race_human
		}
		if = {
			limit = { has_idea = orc_primary_race }
			set_country_flag = opinion_set_race_orc
		}
		if = {
			limit = { has_idea = pale_orc_primary_race }
			set_country_flag = opinion_set_race_pale_orc
		}
		if = {
			limit = { has_idea = dwarf_primary_race }
			set_country_flag = opinion_set_race_dwarf
		}
		if = {
			limit = { has_idea = goblin_primary_race }
			set_country_flag = opinion_set_race_goblin
		}
		if = {
			limit = { has_idea = high_elf_primary_race }
			set_country_flag = opinion_set_race_high_elf
		}
		if = {
			limit = { has_idea = gnome_primary_race }
			set_country_flag = opinion_set_race_gnome
		}
		if = {
			limit = { has_idea = night_elf_primary_race }
			set_country_flag = opinion_set_race_night_elf
		}
	}
}

#Started Nutural Bonus
country_event = {
	id = HOA_startup.5

	hidden = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				has_government = neutral
			}
			every_country = {
				limit = {
					NOT = { has_government = neutral }
				}
				add_opinion_modifier = {
					target = PREV
					modifier = started_neutual_party
				}
				reverse_add_opinion_modifier = {
					target = PREV
					modifier = started_neutual_party
				}
				PREV = {
					add_opinion_modifier = {
						target = ROOT
						modifier = started_neutual_party
					}
				}
			}
		}
	}
	option = {}

}

#Apply War of Three Hammers Opinion
country_event = {
	id = HOA_startup.700

	hidden = yes
	is_triggered_only = yes

	immediate = {
		IRO = {
			add_opinion_modifier = {
				target = AER
				modifier = kinship_threehammerswar
			}
			reverse_add_opinion_modifier = {
				target = AER
				modifier = kinship_threehammerswar
			}
			add_opinion_modifier = {
				target = DIC
				modifier = remnants_threehammerswar
			}
			reverse_add_opinion_modifier = {
				target = DIC
				modifier = remnants_threehammerswar
			}
		}
		AER = {
			add_opinion_modifier = {
				target = DIC
				modifier = remnants_threehammerswar
			}
			reverse_add_opinion_modifier = {
				target = DIC
				modifier = remnants_threehammerswar
			}
		}
	}
	option = {}
}

#Apply specific opinion modifiers
country_event = {
	id = HOA_startup.1000

	hidden = yes
	fire_only_once = yes

	trigger = {
		always = yes
	}

	immediate = {
		#Maraudon / Centaur
		MAU = {
			add_opinion_modifier = {
				target = MGC
				modifier = hoa_mother_of_the_centaur
			}
			add_opinion_modifier = {
				target = GLC
				modifier = hoa_mother_of_the_centaur
			}
			add_opinion_modifier = {
				target = KOL
				modifier = hoa_mother_of_the_centaur
			}
			add_opinion_modifier = {
				target = GAL
				modifier = hoa_mother_of_the_centaur
			}
			reverse_add_opinion_modifier = {
				target = MGC
				modifier = hoa_mother_of_the_centaur
			}
			reverse_add_opinion_modifier = {
				target = GLC
				modifier = hoa_mother_of_the_centaur
			}
			reverse_add_opinion_modifier = {
				target = KOL
				modifier = hoa_mother_of_the_centaur
			}
			reverse_add_opinion_modifier = {
				target = GAL
				modifier = hoa_mother_of_the_centaur
			}
		}

		#Gelkis / Magram rivalry
		GLC = {
			add_opinion_modifier = {
				target = MGC
				modifier = hoa_mortal_enemies
			}
			reverse_add_opinion_modifier = {
				target = MGC
				modifier = hoa_mortal_enemies
			}
		}
	}
	option = {}
}
